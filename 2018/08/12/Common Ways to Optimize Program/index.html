<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Here I want to introduce some commonly used ways to make our programs faster. 1.Reduce frequency with which computation performed. Especially moving code out of loop if it will always peoduce the same">
<meta name="keywords" content="Programming">
<meta property="og:type" content="article">
<meta property="og:title" content="Common Ways to Optimize Program">
<meta property="og:url" content="http://yoursite.com/2018/08/12/Common Ways to Optimize Program/index.html">
<meta property="og:site_name" content="Goodboy Bobby">
<meta property="og:description" content="Here I want to introduce some commonly used ways to make our programs faster. 1.Reduce frequency with which computation performed. Especially moving code out of loop if it will always peoduce the same">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://yoursite.com/2018/08/12/Common%20Ways%20to%20Optimize%20Program/Assemblycode1.png">
<meta property="og:image" content="http://yoursite.com/2018/08/12/Common%20Ways%20to%20Optimize%20Program/Assemblycode2.png">
<meta property="og:updated_time" content="2018-08-12T13:57:48.198Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Common Ways to Optimize Program">
<meta name="twitter:description" content="Here I want to introduce some commonly used ways to make our programs faster. 1.Reduce frequency with which computation performed. Especially moving code out of loop if it will always peoduce the same">
<meta name="twitter:image" content="http://yoursite.com/2018/08/12/Common%20Ways%20to%20Optimize%20Program/Assemblycode1.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Common Ways to Optimize Program</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/projects_url">Projects</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" href="/2018/06/17/Bit manipulations/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2018/08/12/Common Ways to Optimize Program/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2018/08/12/Common Ways to Optimize Program/&text=Common Ways to Optimize Program"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2018/08/12/Common Ways to Optimize Program/&title=Common Ways to Optimize Program"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2018/08/12/Common Ways to Optimize Program/&is_video=false&description=Common Ways to Optimize Program"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Common Ways to Optimize Program&body=Check out this article: http://yoursite.com/2018/08/12/Common Ways to Optimize Program/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2018/08/12/Common Ways to Optimize Program/&title=Common Ways to Optimize Program"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2018/08/12/Common Ways to Optimize Program/&title=Common Ways to Optimize Program"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2018/08/12/Common Ways to Optimize Program/&title=Common Ways to Optimize Program"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2018/08/12/Common Ways to Optimize Program/&title=Common Ways to Optimize Program"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2018/08/12/Common Ways to Optimize Program/&name=Common Ways to Optimize Program&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Reduce-frequency-with-which-computation-performed-Especially-moving-code-out-of-loop-if-it-will-always-peoduce-the-same-result"><span class="toc-number">1.</span> <span class="toc-text">1.Reduce frequency with which computation performed. Especially moving code out of loop if it will always peoduce the same result:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Replace-costly-operation-with-simpler-one-Try-to-use-shift-and-add-instead-of-multiply-or-divide"><span class="toc-number">2.</span> <span class="toc-text">2.Replace costly operation with simpler one. Try to use shift and add instead of multiply or divide:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Pay-attention-to-procedure-calls-in-loop"><span class="toc-number">3.</span> <span class="toc-text">3.Pay attention to procedure calls in loop:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Memory-matters-Try-not-to-update-memory-in-every-loop-use-local-variable-instead-because-it-is-stored-in-register-which-is-easier-to-load-than-those-stored-in-memory"><span class="toc-number">4.</span> <span class="toc-text">4.Memory matters. Try not to update memory in every loop, use local variable instead because it is stored in register which is easier to load than those stored in memory.</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Common Ways to Optimize Program
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Goodboy Bobby</span>
      </span>
      
    <div class="postdate">
        <time datetime="2018-08-12T11:40:52.000Z" itemprop="datePublished">2018-08-12</time>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Programming/">Programming</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>Here I want to introduce some commonly used ways to make our programs faster.</p>
<h3 id="1-Reduce-frequency-with-which-computation-performed-Especially-moving-code-out-of-loop-if-it-will-always-peoduce-the-same-result"><a href="#1-Reduce-frequency-with-which-computation-performed-Especially-moving-code-out-of-loop-if-it-will-always-peoduce-the-same-result" class="headerlink" title="1.Reduce frequency with which computation performed. Especially moving code out of loop if it will always peoduce the same result:"></a>1.Reduce frequency with which computation performed. Especially moving code out of loop if it will always peoduce the same result:</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//bad code</span><br><span class="line">void set_row(double *a, double *b, long i, long n)</span><br><span class="line">&#123;</span><br><span class="line">	long j;</span><br><span class="line">	<span class="keyword">for</span>(j=0;j&lt;n;j++)</span><br><span class="line">		a[n*i+j]=b[j];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//good code</span><br><span class="line">void set_row(double *a, double *b, long i, long n)</span><br><span class="line">&#123;</span><br><span class="line">	long j;</span><br><span class="line">	int ni=n*i;</span><br><span class="line">	<span class="keyword">for</span>(j=0;j&lt;n;j++)</span><br><span class="line">		a[ni+j]=b[j];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Sometimes we can reuse portions of expressions to reduce computation by sharing common subexpressions:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//bad code</span><br><span class="line">a = val[(i-1)*n + j];</span><br><span class="line">b = val[(i+1)*n + j];</span><br><span class="line">c = val[i*n + j-1];</span><br><span class="line">d = val[i*n + j+1];</span><br><span class="line"></span><br><span class="line">//good code</span><br><span class="line">long inj = i*n + j;</span><br><span class="line">a = val[inj - n];</span><br><span class="line">b = val[inj + n];</span><br><span class="line">c = val[inj - 1];</span><br><span class="line">d = val[inj + 1];</span><br></pre></td></tr></table></figure>
<h3 id="2-Replace-costly-operation-with-simpler-one-Try-to-use-shift-and-add-instead-of-multiply-or-divide"><a href="#2-Replace-costly-operation-with-simpler-one-Try-to-use-shift-and-add-instead-of-multiply-or-divide" class="headerlink" title="2.Replace costly operation with simpler one. Try to use shift and add instead of multiply or divide:"></a>2.Replace costly operation with simpler one. Try to use shift and add instead of multiply or divide:</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//bad code</span><br><span class="line">y = x * 16;</span><br><span class="line"></span><br><span class="line">//good code</span><br><span class="line">y = x &lt;&lt; 4;</span><br></pre></td></tr></table></figure>
<h3 id="3-Pay-attention-to-procedure-calls-in-loop"><a href="#3-Pay-attention-to-procedure-calls-in-loop" class="headerlink" title="3.Pay attention to procedure calls in loop:"></a>3.Pay attention to procedure calls in loop:</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">//bad code</span><br><span class="line">void lower(char *s)</span><br><span class="line">&#123;</span><br><span class="line">	size_t i;</span><br><span class="line">	<span class="keyword">for</span> (i=0;i&lt;strlen(s);i++)</span><br><span class="line">		<span class="keyword">if</span> (s[i] &gt;= <span class="string">'A'</span> &amp;&amp; s[i] &lt;= <span class="string">'Z'</span>)</span><br><span class="line">			s[i] -= (<span class="string">'A'</span> - <span class="string">'Z'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//good code</span><br><span class="line">void lower(char *s)</span><br><span class="line">&#123;</span><br><span class="line">	size_t i;</span><br><span class="line">	size_t len = strlen(s);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span> (i=0;i&lt;len;i++)</span><br><span class="line">		<span class="keyword">if</span> (s[i] &gt;= <span class="string">'A'</span> &amp;&amp; s[i] &lt;= <span class="string">'Z'</span>)</span><br><span class="line">			s[i] -= (<span class="string">'A'</span> - <span class="string">'Z'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-Memory-matters-Try-not-to-update-memory-in-every-loop-use-local-variable-instead-because-it-is-stored-in-register-which-is-easier-to-load-than-those-stored-in-memory"><a href="#4-Memory-matters-Try-not-to-update-memory-in-every-loop-use-local-variable-instead-because-it-is-stored-in-register-which-is-easier-to-load-than-those-stored-in-memory" class="headerlink" title="4.Memory matters. Try not to update memory in every loop, use local variable instead because it is stored in register which is easier to load than those stored in memory."></a>4.Memory matters. Try not to update memory in every loop, use local variable instead because it is stored in register which is easier to load than those stored in memory.</h3><p><code>`</code>bash<br>//bad code<br>void sum_rows1(double <em>a, double </em>b, long n)<br>{<br>    long i,j;<br>    for (i=0;i&lt;n;i++)<br>    {<br>        b[i]=0;<br>        for (j=0;j&lt;n;j++)<br>            b[i] += a[i*n + j];<br>    }<br>}</p>
<p>//good code<br>void sum_rows2(double <em>a, double </em>b, long n)<br>{<br>    long i,j;<br>    for (i=0;i&lt;n;i++)<br>    {<br>        double val = 0;<br>        for (j=0;j&lt;n;j++)<br>            val += a[i*n + j];<br>        b[i] = val;<br>    }<br>}</p>
<p>Difference can be shown from the assembly code below:</p>
<p><img src="Assemblycode1.png" alt=""><br><img src="Assemblycode2.png" alt=""></p>

  </div>
</article>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/projects_url">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Reduce-frequency-with-which-computation-performed-Especially-moving-code-out-of-loop-if-it-will-always-peoduce-the-same-result"><span class="toc-number">1.</span> <span class="toc-text">1.Reduce frequency with which computation performed. Especially moving code out of loop if it will always peoduce the same result:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Replace-costly-operation-with-simpler-one-Try-to-use-shift-and-add-instead-of-multiply-or-divide"><span class="toc-number">2.</span> <span class="toc-text">2.Replace costly operation with simpler one. Try to use shift and add instead of multiply or divide:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Pay-attention-to-procedure-calls-in-loop"><span class="toc-number">3.</span> <span class="toc-text">3.Pay attention to procedure calls in loop:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Memory-matters-Try-not-to-update-memory-in-every-loop-use-local-variable-instead-because-it-is-stored-in-register-which-is-easier-to-load-than-those-stored-in-memory"><span class="toc-number">4.</span> <span class="toc-text">4.Memory matters. Try not to update memory in every loop, use local variable instead because it is stored in register which is easier to load than those stored in memory.</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2018/08/12/Common Ways to Optimize Program/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2018/08/12/Common Ways to Optimize Program/&text=Common Ways to Optimize Program"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2018/08/12/Common Ways to Optimize Program/&title=Common Ways to Optimize Program"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2018/08/12/Common Ways to Optimize Program/&is_video=false&description=Common Ways to Optimize Program"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Common Ways to Optimize Program&body=Check out this article: http://yoursite.com/2018/08/12/Common Ways to Optimize Program/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2018/08/12/Common Ways to Optimize Program/&title=Common Ways to Optimize Program"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2018/08/12/Common Ways to Optimize Program/&title=Common Ways to Optimize Program"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2018/08/12/Common Ways to Optimize Program/&title=Common Ways to Optimize Program"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2018/08/12/Common Ways to Optimize Program/&title=Common Ways to Optimize Program"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2018/08/12/Common Ways to Optimize Program/&name=Common Ways to Optimize Program&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2018 Lipeng Zhu
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/projects_url">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/fontawesome-all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


